<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Лабораторная 02 — Обработка изображений</title>
  </head>
  <body>
    <div class="app-root neobrutal">
      <header class="nb-header">
        <h1 class="nb-title">Лабораторная 02 — Обработка изображений <span class="wip-badge" title="В разработке">WIP</span></h1>
        <div class="selector-row-wrapper">
          <label>Исходное изображение:
            <select id="sample-select"></select>
          </label>
          <label>Или загрузите файл: <input id="file-input" type="file" accept="image/*"/></label>
        </div>
      </header>

      <section class="panels-grid">
        <div class="nb-panel">
          <h2 class="panel-title">Оригинал</h2>
          <canvas id="canvas-src" width="400" height="300"></canvas>
          <h4 class="nb-small">Гистограмма (люминанс)</h4>
          <canvas id="hist-src" width="400" height="120"></canvas>
        </div>

        <div class="nb-panel">
          <h2 class="panel-title">Результат</h2>
          <canvas id="canvas-dst" width="400" height="300"></canvas>
          <h4 class="nb-small">Гистограмма (люминанс)</h4>
          <canvas id="hist-dst" width="400" height="120"></canvas>
        </div>
      </section>

      <section class="panels-grid">
        <div class="nb-panel">
          <h3 class="panel-title">Нелинейные фильтры</h3>
          <label>Радиус медианного: <input type="range" id="median-radius" min="1" max="5" value="1"/></label>
          <button id="apply-median" class="nb-btn">Применить медианный</button>
        </div>

        <div class="nb-panel">
          <h3 class="panel-title">Контраст</h3>
          <label>Низкий (0..255): <input id="contrast-low" type="number" value="0" min="0" max="255"/></label>
          <label>Высокий (0..255): <input id="contrast-high" type="number" value="255" min="0" max="255"/></label>
          <button id="apply-linear" class="nb-btn nb-btn-accent">Линейное растяжение</button>
        </div>

        <div class="nb-panel">
          <h3 class="panel-title">Выравнивание гистограммы</h3>
          <label><input type="radio" name="eq-mode" value="rgb" checked/> По каналам RGB</label>
          <label><input type="radio" name="eq-mode" value="hls"/> По яркости (HLS)</label>
          <button id="apply-eq" class="nb-btn">Применить</button>
        </div>
        
        <div class="nb-panel">
          <div class="panel-row">
            <button id="reset" class="nb-btn nb-btn-danger">Сбросить</button>
            <button id="download" class="nb-btn">Скачать</button>
          </div>
        </div>
      </section>

      <p class="nb-small">Сгенерированные тестовые изображения: шумное, размазанное, низкоконтрастный градиент, полосатая текстура.</p>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
